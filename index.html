<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Skinny Wide Weather Widget</title>
  <meta name="viewport" content="width=2000">
  <style>
    html, body {
      background: #181e2a;
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      color: #fff;
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    #main-container {
      width: 2000px;
      height: 320px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      background: #181e2a;
      box-shadow: 0 2px 24px #0008;
      border-radius: 18px;
      overflow: hidden;
    }
    #current-block {
      width: 360px;
      min-width: 300px;
      max-width: 440px;
      height: 100%;
      background: #222c40;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: center;
      padding: 32px 32px 32px 40px;
      box-sizing: border-box;
      border-right: 3px solid #222c40;
    }
    #current-block .temp {
      font-size: 5rem;
      font-weight: 600;
      margin-bottom: 0.2em;
      color: #fff;
      line-height: 1;
      text-shadow: 0 1px 16px #222;
    }
    #current-block .weather {
      font-size: 2.2rem;
      margin-bottom: 0.7em;
      font-weight: 400;
      letter-spacing: 0.01em;
      color: #fff;
    }
    #current-block .details {
      font-size: 1.1rem;
      color: #c0d2ed;
      margin-bottom: 0.4em;
    }
    #forecast-block {
      flex: 1;
      display: flex;
      align-items: center;
      height: 100%;
      padding: 0 16px;
      overflow-x: auto;
      background: #181e2a;
      gap: 14px;
    }
    .forecast-card {
      min-width: 130px;
      max-width: 150px;
      height: 210px;
      background: #232f47;
      border-radius: 16px;
      padding: 16px 10px 8px 16px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      box-shadow: 0 1px 5px #0004;
      color: #fff;
      margin: 0 4px;
      justify-content: flex-start;
    }
    .forecast-card .day {
      font-weight: bold;
      font-size: 1.1rem;
      margin-bottom: 6px;
      color: #fff;
    }
    .forecast-card .icon {
      font-size: 2.2rem;
      margin-bottom: 7px;
    }
    .forecast-card .f-temp {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 2px;
      color: #fff;
    }
    .forecast-card .desc {
      font-size: 1.08rem;
      color: #c0d2ed;
      margin-bottom: 3px;
      min-height: 33px;
    }
    .forecast-card .lowhigh {
      font-size: 1.08rem;
      color: #d6eaff;
    }
    /* Scrollbar for overflow */
    #forecast-block::-webkit-scrollbar {
      height: 6px; background: #222c40;
    }
    #forecast-block::-webkit-scrollbar-thumb {
      background: #445e8a; border-radius: 4px;
    }
  </style>
</head>
<body>
  <div id="main-container">
    <div id="current-block">
      <div class="temp" id="temp">--Â°C</div>
      <div class="weather" id="weather">Loadingâ€¦</div>
      <div class="details" id="details"></div>
    </div>
    <div id="forecast-block"></div>
  </div>
  <script>
    // XWeather forecast endpoint (replace with your station code as needed)
    const currentUrl = 'https://data.api.xweather.com/conditions/pws_pukerimu?format=json&plimit=1&filter=1min&client_id=U8feQfLlcEfcXDfsWZs4C&client_secret=HvIaM6HOkFmlJ8ywHPNSudj9txzpyuP7gJh2eDvq';
    const forecastUrl = 'https://data.api.xweather.com/forecasts/pws_pukerimu?format=json&plimit=7&fields=periods.timestamp,periods.dateTimeISO,periods.tempC,periods.weather,periods.icon,periods.maxTempC,periods.minTempC,periods.humidity,periods.precipMM,periods.windSpeedKPH&client_id=U8feQfLlcEfcXDfsWZs4C&client_secret=HvIaM6HOkFmlJ8ywHPNSudj9txzpyuP7gJh2eDvq';

    function iconUrl(icon) {
      // Use Aeris standard icons
      if (!icon) return '';
      return `https://cdn.aerisapi.com/wxblox/icons/${icon}`;
    }
    function dayOfWeek(dateISO) {
      return new Date(dateISO).toLocaleDateString('en-NZ', { weekday: 'short' });
    }
    // Load current conditions
    fetch(currentUrl).then(r=>r.json()).then(json => {
      if (!json.success) throw new Error('No current conditions');
      const p = json.response[0].periods[0];
      document.getElementById('temp').textContent = typeof p.tempC === 'number' ? `${Math.round(p.tempC)}Â°C` : '--Â°C';
      document.getElementById('weather').textContent = p.weather || '--';
      document.getElementById('details').innerHTML =
        `<b>Humidity:</b> ${p.humidity !== null ? p.humidity+'%' : 'NA'}<br>
         <b>Wind:</b> ${p.windSpeedKPH !== null ? Math.round(p.windSpeedKPH)+' km/h' : 'NA'}<br>
         <b>Pressure:</b> ${p.pressureMB || 'NA'} hPa<br>
         <b>Precip:</b> ${p.precipMM || 0} mm<br>
         <b>Feels like:</b> ${p.feelslikeC !== null ? Math.round(p.feelslikeC)+'Â°C' : 'NA'}`;
    });

    // Load forecast
    fetch(forecastUrl).then(r=>r.json()).then(json => {
      if (!json.success) throw new Error('No forecast');
      const fc = json.response[0].periods;
      const fcDom = document.getElementById('forecast-block');
      fcDom.innerHTML = '';
      for (let i=0; i<fc.length; ++i) {
        const p = fc[i];
        fcDom.innerHTML += `
          <div class="forecast-card">
            <div class="day">${dayOfWeek(p.dateTimeISO)}</div>
            <img class="icon" src="${iconUrl(p.icon)}" alt="" width="40" height="40">
            <div class="f-temp">${Math.round(p.tempC)}Â°C</div>
            <div class="desc">${p.weather || ''}</div>
            <div class="lowhigh">H:${Math.round(p.maxTempC)}Â° L:${Math.round(p.minTempC)}Â°</div>
            <div class="details">ðŸ’§${p.humidity || '--'}%<br>ðŸ’¨${Math.round(p.windSpeedKPH||0)} km/h</div>
          </div>
        `;
      }
    });
  </script>
</body>
</html>